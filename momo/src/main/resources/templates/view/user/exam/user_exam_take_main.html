<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>ê³µë¬´ì› ëª¨ì˜ê³ ì‚¬ ì‘ì‹œ í˜ì´ì§€</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f8f8;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            font-size: 20px;
            font-weight: bold;
            background-color: #f0ede8;
            padding: 10px;
            margin-bottom: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .info-row span {
            color: #333;
        }

        .info-row .label {
            font-weight: bold;
        }

        .alert-box {
            background-color: #f8f8f8;
            padding: 10px;
            margin-top: 20px;
            border: 1px solid #ddd;
        }

        .alert-box .alert-icon {
            color: #1d4f9a;
            font-weight: bold;
        }

        .alert-text {
            color: #1d4f9a;
            margin-left: 5px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }

        .table th {
            background-color: rgb(241, 241, 241);
            color: black;
        }

        .required-text {
            color: red;
            margin-top: 10px;
        }

        .button-section {
            text-align: center;
            margin-top: 20px;
        }

        .submit-btn {
            background-color: #3a80c6;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .warning-box {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 20px;
        }

        .warning-box .warning-icon {
            color: #1d4f9a;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header" th:text=${examInfo.examNm} style="text-align: center;">[ê³µë¬´ì›] 2023ë…„ ì œ1íšŒ ì˜¨ë¼ì¸ ëª¨ì˜ê³ ì‚¬</div>

        <table class="table">
            <colgroup>
                <col width="120" />
                <col width="*" />
                <col width="120" />
                <col width="*" />
            </colgroup>
            <tbody>
                <tr>
                    <th>ì‘ì‹œì</th>
                    <td>
                        <span th:text="${'['+examInfo.userId+'] '+examInfo.userName}"></span>
                    </td>
                    <th>ì‹œí—˜ ë‚ ì§œ</th>
                    <td th:text="${examInfo.examDate}">2024-06-08</td>
                </tr>
                <tr>
                    <th>ëŒ€ìƒ í•™ë…„</th>
                    <td th:text="${examInfo.examTarGrd+'í•™ë…„'}">1í•™ë…„</td>
                    <th>ì‘ì‹œ ë‚ ì§œ</th>
                    <td th:text="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">2024-11-08</td>
                </tr>
                <tr>
                    <th>ì‹œí—˜ ìœ í˜•</th>
                    <td th:text="${examInfo.examType}">í‰ê°€ì›</td>
                    <th>ì¶œì œê¸°ê´€</th>
                    <td th:text="${examInfo.examInst}">í•œêµ­ìŠ¤ë§ˆíŠ¸ì •ë³´êµìœ¡ì›</td>
                </tr>
            </tbody>
        </table>

        <div class="alert-box">
            <span class="alert-icon">ğŸ”Š</span> &nbsp;ì£¼ì˜ì‚¬í•­<br />
            <span class="alert-text">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span>1) ì´ ëª¨ì˜ê³ ì‚¬ëŠ” ë¬´ë£Œëª¨ì˜ê³ ì‚¬ ì…ë‹ˆë‹¤.</span>
                <br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>
                    2) ëª¨ì˜ê³ ì‚¬ë¥¼ ì‘ì‹œí•˜ë©´ ëª¨ì˜ê³ ì‚¬ ê²°ê³¼ì™€ í•´ì„¤ì„ ëª¨ì˜ê³ ì‚¬ ì‘ì‹œ ëª©ë¡ì—ì„œ
                    í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </span>
                <br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>
                    3) ì‘ì‹œí•  ê³¼ëª©ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.
                </span>
            </span>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>ë¶„ë¥˜</th>
                    <th>ê³¼ëª©</th>
                    <th>ì‘ì‹œ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ì–¸ì–´ ì˜ì—­</td>
                    <td>êµ­ì–´</td>
                    <td><input type="checkbox" name="subject" value="smircc1" /></td>
                </tr>
                <tr>
                    <td>ìˆ˜ë¦¬ ì˜ì—­</td>
                    <td>ìˆ˜í•™</td>
                    <td><input type="checkbox" name="subject" value="smircc5" /></td>
                </tr>
                <tr>
                    <td>ì˜ì–´ ì˜ì—­</td>
                    <td>ì˜ì–´</td>
                    <td><input type="checkbox" name="subject" value="smircc10" /></td>
                </tr>
                <tr>
                    <td>í•œêµ­ì‚¬ ì˜ì—­</td>
                    <td>í•œêµ­ì‚¬</td>
                    <td><input type="checkbox" name="subject" value="smircc48" /></td>
                </tr>
                <tr id="social"></tr>
                <tr id="science"></tr>
                <tr id="job"></tr>
                <tr id="lang"></tr>
                <tr id="last"></tr>
            </tbody>
        </table>

        <div class="button-section">
            <button class="submit-btn">í™•ì¸</button>
        </div>
    </div>

    <script th:inline="javascript">
        $('.submit-btn').click(function () {
            const width = window.innerWidth * 1.0;
            const height = window.innerHeight * 1.0;
            const examCode = 'doyoung1234';
            window.open(`/exam/${examCode}/examination`, 'popupWindow', `width=${width},height=${height},scrollbars=yes`);
        })

        const socialList = [];
        const scienceList = [];
        const jobList = [];
        const langList = [];
        var examQuestionInfo = /*[[${examQuestionInfo}]]*/[];
        examQuestionInfo.forEach((element, idx) => {
            const smjrcc = element['subMjrCatCode'];
            switch (smjrcc) {
                case 'smjrcc5':
                    if (!socialList.includes(element['subMirCatNm'])) {
                        socialList.push(element['subMirCatNm']);
                        let newRow = ``;
                        if (socialList.length == 1) {
                            newRow = `
                                <td>ì‚¬íšŒíƒêµ¬ ì˜ì—­</td>
                                <td>${element['subMirCatNm']}</td>
                                <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}"/></td>
                            `;
                            $('#social').append(newRow);
                        } else {
                            newRow = `
                                <tr>
                                    <td>${element['subMirCatNm']}</td>
                                    <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                                </tr>
                            `;
                            $('#science').before(newRow);
                        }
                        $('#social').find('td').eq(0).prop('rowspan', socialList.length);
                    }
                    break;

                case 'smjrcc6':
                    if (!scienceList.includes(element['subMirCatNm'])) {
                        scienceList.push(element['subMirCatNm']);
                        let newRow = ``;
                        if (scienceList.length == 1) {
                            newRow = `
                                <td>ê³¼í•™íƒêµ¬ ì˜ì—­</td>
                                <td>${element['subMirCatNm']}</td>
                                <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                            `;
                            $('#science').append(newRow);
                        } else {
                            newRow = `
                                <tr>
                                    <td>${element['subMirCatNm']}</td>
                                    <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                                </tr>
                            `;
                            $('#job').before(newRow);
                        }
                        $('#science').find('td').eq(0).prop('rowspan', scienceList.length);
                    }
                    break;

                case 'smjrcc7':
                    if (!jobList.includes(element['subMirCatNm'])) {
                        jobList.push(element['subMirCatNm']);
                        let newRow = ``;
                        if (jobList.length == 1) {
                            newRow = `
                                <td>ì§ì—…íƒêµ¬ ì˜ì—­</td>
                                <td>${element['subMirCatNm']}</td>
                                <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                            `;
                            $('#job').append(newRow);
                        } else {
                            newRow = `
                                <tr>
                                    <td>${element['subMirCatNm']}</td>
                                    <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                                </tr>
                            `;
                            $('#lang').before(newRow);
                        }
                        $('#job').find('td').eq(0).prop('rowspan', jobList.length);
                    }
                    break;

                case 'smjrcc8':
                    if (!langList.includes(element['subMirCatNm'])) {
                        langList.push(element['subMirCatNm']);
                        let newRow = ``;
                        if (langList.length == 1) {
                            newRow = `
                                <td>ì™¸êµ­ì–´ ì˜ì—­</td>
                                <td>${element['subMirCatNm']}</td>
                                <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                            `;
                            $('#lang').append(newRow);
                        } else {
                            newRow = `
                                <tr>
                                    <td>${element['subMirCatNm']}</td>
                                    <td><input type="checkbox" name="subject" value="${element['subMirCatCode']}" /></td>
                                </tr>
                            `;
                            $('#last').before(newRow);
                        }
                        $('#lang').find('td').eq(0).prop('rowspan', langList.length);
                    }
                    break;
            }
        })
    </script>
</body>

</html>
